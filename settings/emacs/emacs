;;; Package --- Summary
;;; Commentary:
;;; 	My Emacs config
;;; Code:

;; User Variables:
(defvar user-terminal "gnome-terminal")

;; Set utf-8
(prefer-coding-system 'utf-8)
(set-default-coding-systems 'utf-8)
(set-terminal-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
(setq-default default-buffer-file-coding-system 'utf-8)

(setq backup-directory-alist `((".*" . ,temporary-file-directory)))
(setq auto-save-file-name-transforms `((".*" ,temporary-file-directory t)))
(setq custom-file (concat user-emacs-directory "custom.el"))
(load custom-file t)
(setq help-window-select t)
(setq vc-follow-symlinks nil)
(setq dired-listing-switches "-lXah")
(setq-default dired-dwim-target t)
(setq-default python-shell-interpreter "python3")

;; org-mode
(setq-default org-enforce-todo-dependencies nil
	      org-startup-indented t
	      org-hide-emphasis-markers t
	      org-fontify-done-headline t
	      org-pretty-entities t
	      org-default)

(fset 'yes-or-no-p 'y-or-n-p)
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
(add-hook 'prog-mode-hook 'column-number-mode)
(add-to-list 'default-frame-alist '(height . 48))
(add-to-list 'default-frame-alist '(width . 120))
(setq completion-ignore-case t)
(tool-bar-mode -1)

;;; Packages:
(eval-and-compile
    (require 'package)
    (setq package-archives '(("gnu" . "https://elpa.gnu.org/packages/")
			     ("melpa-stable" . "https://stable.melpa.org/packages/")))
    (package-initialize)
    (unless (package-installed-p 'use-package)
      (package-refresh-contents)
      (package-install 'use-package))
    (require 'use-package)
    (setf use-package-always-ensure t))

(eval-when-compile
  (require 'use-package))

;; ido
(ido-mode 1)
(setq-default
    ido-auto-merge-work-directories-length nil
    ido-enable-last-directory-history t
    ido-case-fold 1
    ido-decorations '("" "" "\n"
			"\n..." " ->" ""
			" [No match]"
			" [Matched]"
			" [Not readable]"
			" [Too big]"
			" [Confirm]"))
;; Theme
(use-package atom-one-dark-theme)
(load-theme 'atom-one-dark t)

;; mode-line
(set-face-attribute 'mode-line nil
		    :background "gray60"
		    :foreground "black"
		    :height 100
		    :box '(:style released-button :line-width -1 :color nil))
(set-face-attribute 'mode-line-buffer-id nil
		    :foreground "black"
		    :weight 'bold
		    :height 130)
(set-face-attribute 'mode-line-inactive nil
		    :background "gray30"
		    :foreground "gray10"
		    :weight 'normal
		    :height 100)

;; line-number
(set-face-attribute 'line-number nil
		    :background "gray30"
		    :foreground "black")

(use-package evil
  :config
  (evil-mode 1)
  (setq evil-complete-next-func 'hippie-expand))

(use-package magit)

(use-package which-key
  :config (which-key-mode 1))

(use-package flycheck
  :config
  (add-hook 'prog-mode-hook 'flycheck-mode))


;;; Keybinds:
;; Open a terminal emulator
(global-set-key (kbd "C-c t") (kbd (concat "M-! " user-terminal)))
(global-set-key (kbd "C-c a") 'org-agenda)
(global-set-key (kbd "C-c c") 'org-capture)

;;; .emacs ends here
