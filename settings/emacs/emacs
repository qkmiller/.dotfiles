;;; Package --- Summary
;;; Commentary:
;;; 	My Emacs config
;;; Code:

;;; Globals:
(defvar user-terminal "gnome-terminal")

;;; Settings:
(setq backup-directory-alist `((".*" . ,temporary-file-directory)))
(setq auto-save-file-name-transforms `((".*" ,temporary-file-directory t)))
(setq custom-file (concat user-emacs-directory "custom.el"))
(load custom-file t)
(setq help-window-select t)
(setq vc-follow-symlinks nil)
(setq dired-listing-switches "-lXah")
(setq-default dired-dwim-target t)
(setq-default python-shell-interpreter "python3")
(setq-default org-enforce-todo-dependencies nil)
(setq-default org-startup-indented t)
(fset 'yes-or-no-p 'y-or-n-p)
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
(add-hook 'prog-mode-hook 'column-number-mode)
(add-to-list 'default-frame-alist '(height . 48))
(add-to-list 'default-frame-alist '(width . 120))
(setq completion-ignore-case t)
(tool-bar-mode -1)

;;; Packages:
(eval-and-compile
    (require 'package)
    (setq package-archives '(("gnu" . "https://elpa.gnu.org/packages/")
			     ("melpa-stable" . "https://stable.melpa.org/packages/")))
    (package-initialize)
    (unless (package-installed-p 'use-package)
      (package-refresh-contents)
      (package-install 'use-package))
    (require 'use-package)
    (setf use-package-always-ensure t))

(eval-when-compile
  (require 'use-package))

(use-package ido
  :ensure nil
  :config
  (ido-mode 1)
  (setf ido-decorations '("\n" "" "\n" " | ..." "\n" "" " [No match]" " [Matched]" " [Not readable]" " [Too big]" " [Confirm]"))
  ;;(setf (nth 0 ido-decorations) "")
  ;;(setf (nth 1 ido-decorations) "")
  ;;(setf (nth 2 ido-decorations) "\n")
  (setq ido-enable-last-directory-history t)
  (setq ido-case-fold t))

(use-package evil
  :config
  (evil-mode 1)
  (setq evil-complete-next-func 'hippie-expand))

(use-package magit)

(use-package which-key
  :config (which-key-mode 1))

(use-package flycheck
  :config
  (add-hook 'prog-mode-hook 'flycheck-mode))

(use-package vscode-dark-plus-theme
  :config
  (load-theme 'vscode-dark-plus t)
  (set-face-background 'line-number "#333333")
  (setq frame-background-mode 'dark)
  (set-face-background 'mode-line-inactive "#000044")
  (set-face-background 'mode-line "#0000aa")
  (set-face-foreground 'mode-line-inactive "#7d7d7d"))

;;; Keybinds:
(global-set-key (kbd "C-c t") (kbd (concat "M-! " user-terminal)))
(global-set-key (kbd "C-c C-t") (kbd (concat "M-! " user-terminal)))

;;; .emacs ends here
